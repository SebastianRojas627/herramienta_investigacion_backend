import { Injectable } from '@nestjs/common';
import { CreateSearchDto } from './dto/create-search.dto';
import { UpdateSearchDto } from './dto/update-search.dto';
import { LogsService } from 'src/logs/logs.service';
import { CreateLogDto } from 'src/logs/dto/create-log.dto';
import { lastValueFrom } from 'rxjs';
import { HttpService } from '@nestjs/axios';
import { SearchSegipDto } from 'src/segip/dto/search-segip.dto';
import { AntecendentesService } from 'src/antecendentes/antecendentes.service';
import { ItvService } from 'src/itv/itv.service';
import { SegipService } from 'src/segip/segip.service';
import { SearchItvDto } from 'src/itv/dto/search-itv.dto';
import { SearchByOwnerDto } from 'src/itv/dto/search-by-owner.dto';
import { dividirNombreMadre, dividirNombrePadre } from 'src/helpers/helpers';

@Injectable()
export class SearchService {
  constructor(
    private readonly logsService: LogsService,
    private readonly httpService: HttpService,
    private readonly antecedentesService: AntecendentesService,
    private readonly itvService: ItvService,
    private readonly segipService: SegipService,
  ) {}

  async searchSegip(searchSegipDto: SearchSegipDto) {
    const response = await this.segipService.searchSegip(searchSegipDto);

    const antecedentesResponse = await Promise.all(
      response.map(async (element) => {
        const numeroDocumento = element.NumeroDocumento;

        const antecedentes = await this.antecedentesService.searchAntecedentes({
          NumeroDocumento: numeroDocumento,
        });

        return {
          PrimerApellido: element.PrimerApellido,
          SegundoApellido: element.SegundoApellido,
          Nombres: element.Nombres,
          NumeroDocumento: element.NumeroDocumento,
          Domicilio: element.Domicilio,
          Antecedentes: antecedentes,
        };
      }),
    );

    return antecedentesResponse;
  }

  async searchItv(searchItvDto: SearchItvDto) {
    const response = await this.itvService.searchItv(searchItvDto);

    const vehicleResponse = await Promise.all(
      response.map(async (element) => {
        return {
          datos_tecnicos: {
            placa: element.datos_tecnicos.placa,
            marca: element.datos_tecnicos.marca,
            modelo: element.datos_tecnicos.modelo,
            color: element.datos_tecnicos.color,
          },
        };
      }),
    );

    return vehicleResponse;
  }

  async searchSegipOne(userId: string, searchSegipDto: SearchSegipDto) {
    const response = await this.segipService.searchSegipOne(searchSegipDto);

    const numeroDocumento = response.NumeroDocumento;

    const nombrePadre = dividirNombrePadre(
      response.NombreCompletoPadre,
      response.PrimerApellido,
    );
    const padre = await this.segipService.searchSegipbyName({
      ced: '',
      com: '',
      nom: nombrePadre.nombres,
      pat: nombrePadre.apellidoPaterno,
      mat: nombrePadre.apellidoMaterno,
    });

    const nombreMadre = dividirNombreMadre(
      response.NombreCompletoMadre,
      response.SegundoApellido,
    );
    const madre = await this.segipService.searchSegipbyName({
      ced: '',
      com: '',
      nom: nombreMadre.nombres,
      pat: nombreMadre.apellidoPaterno,
      mat: nombreMadre.apellidoMaterno,
    });

    const nombreConyuge = response.NombreCompletoConyuge;
    const partsConyuge = nombreConyuge.trim().split(/\s+/);
    const conyuge = await this.segipService.searchSegipbyName({
      ced: '',
      com: '',
      nom: partsConyuge[0],
      pat: partsConyuge[1],
      mat: partsConyuge[2],
    });

    const posiblesHermanos = await this.searchSegip({
      ced: '',
      com: '',
      nom: '',
      pat: response.PrimerApellido,
      mat: response.SegundoApellido,
    }); // agregar la comparacion de nombre completo padres

    const hermanos = posiblesHermanos.filter(
      (hermano) => hermano.NumeroDocumento !== numeroDocumento,
    );

    const posiblesHijos = await this.searchSegip({
      ced: '',
      com: '',
      nom: '',
      pat: response.PrimerApellido,
      mat: response.SegundoApellido,
    }); // agregar el apellido de la conyuge y comparar resultados con el nombre completo padre que seria nombre de persona original

    const hijos = posiblesHijos.filter(
      (hermano) => hermano.NumeroDocumento !== numeroDocumento,
    );

    const antecedentes = await this.antecedentesService.searchAntecedentes({
      NumeroDocumento: numeroDocumento,
    });

    const vehiculos = await this.searchVehiculosByOwner({
      nro_documento: numeroDocumento,
    });

    const createLogDto: CreateLogDto = {
      user_id: userId,
      busqueda: numeroDocumento,
      tipo: 'persona',
    };
    await this.logsService.create(createLogDto);

    let Fotografia;

    if (response.Genero === 'Femenino') {
      Fotografia =
        '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';
    } else {
      Fotografia =
        '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';
    }

    return {
      Fotografia: Fotografia,
      ...response,
      Antecedentes: antecedentes,
      Relations: {
        padres: [
          {
            ...padre,
          },
          {
            ...madre,
          },
        ],
        hermanos,
        hijos,
        conyugue: {
          ...conyuge,
        },
        vehiculos,
      },
    };
  }

  async searchItvOne(userId: string, searchItvDto: SearchItvDto) {
    const response = await this.itvService.searchItvOne(searchItvDto);
    const personas = await this.searchPersonasByVehiculo({
      placa: response.datos_tecnicos.placa,
    });

    const createLogDto: CreateLogDto = {
      user_id: userId,
      busqueda: response.datos_tecnicos.placa,
      tipo: 'vehiculo',
    };

    await this.logsService.create(createLogDto);

    return {
      Fotografia:
        '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',
      ...response,
      Relations: {
        personas: personas,
      },
    };
  }

  async searchVehiculosByOwner(searchByOwnerDto: SearchByOwnerDto) {
    const response = await this.itvService.searchByOwner(searchByOwnerDto);
    const ownerResponse = await Promise.all(
      response.map(async (element) => {
        return {
          Fotografia:
            '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',
          datos_tecnicos: {
            placa: element.datos_tecnicos.placa,
            marca: element.datos_tecnicos.marca,
            modelo: element.datos_tecnicos.modelo,
            color: element.datos_tecnicos.color,
          },
        };
      }),
    );

    return ownerResponse;
  }

  async searchPersonasByVehiculo(searchItvDto: SearchItvDto) {
    const response = await this.itvService.searchPersonaVehicles(searchItvDto);
    const vehicleResponse = await Promise.all(
      response.map(async (element) => {
        return {
          Fotografia:
            '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',
          PrimerApellido: element.paterno,
          SegundoApellido: element.materno,
          Nombres: element.nombre,
          NumeroDocumento: element.nro_documento,
          Domicilio: element.domicilio,
        };
      }),
    );

    return vehicleResponse;
  }
}
